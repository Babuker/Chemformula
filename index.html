<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ChemFormula® - Chemical Formulation Optimizer</title>
<meta name="description" content="Professional chemical formulation optimizer." />
<link rel="stylesheet" href="style.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode/dist/JsBarcode.all.min.js"></script>
</head>
<body>
<header>
  <h1>ChemFormula® - Chemical Formulation Optimizer</h1>
  <div id="langSwitch">
    <label for="langSelect">Language:</label>
    <select id="langSelect">
      <option value="en" selected>English</option>
      <option value="ar">العربية</option>
    </select>
  </div>
</header>

<main>
  <section id="inputs">
    <h2>Step 1: Active Ingredient & Amount</h2>
    <input type="text" id="apiName" placeholder="Active Ingredient Name" />
    <input type="number" id="apiAmount" placeholder="Amount (mg)" min="0" />

    <h2>Step 2: Reference Standard</h2>
    <select id="referenceStandard">
      <option value="USP">USP</option>
      <option value="BP">BP</option>
      <option value="EUP">EUP</option>
    </select>

    <h2>Step 3: Dosage Form</h2>
    <select id="dosageForm">
      <option value="Tablet">Tablet</option>
      <option value="Coated Tablet">Coated Tablet</option>
      <option value="Liquid Syrup">Liquid Syrup</option>
      <option value="Dry Syrup">Dry Syrup</option>
      <option value="Capsule">Capsule</option>
    </select>

    <h2>Step 4: Formulation Goal</h2>
    <select id="formulationGoal">
      <option value="Quality & Cost">Balance Quality & Cost</option>
      <option value="Quality Only">Quality Only</option>
      <option value="Cost Only">Cost Only</option>
    </select>

    <h2>Step 5: Release Mechanism</h2>
    <select id="releaseMechanism">
      <option value="Immediate">Immediate Release</option>
      <option value="Sustained">Sustained Release</option>
      <option value="Delayed">Delayed Release</option>
    </select>

    <h2>Step 6: Excipients Selection Mode</h2>
    <select id="excipientsMode">
      <option value="auto" selected>Automatic</option>
      <option value="manual">Manual</option>
    </select>

    <div id="manualExcipientsContainer" style="display:none;">
      <h3>Manual Excipients Input</h3>
      <textarea id="manualExcipients" rows="5" placeholder="Enter excipients as name,role,costPerKg,minPercent,maxPercent separated by lines"></textarea>
      <small>Example:<br>Microcrystalline Cellulose,Filler,5,2,10<br>Magnesium Stearate,Lubricant,8,0.5,2</small>
    </div>

    <h2>Step 7: Batch Size</h2>
    <input type="number" id="batchSize" placeholder="Number of Units" min="1" />

    <button id="calculateBtn">Calculate Formulation</button>
  </section>

  <section id="results" style="display:none;">
    <h2>Formulation Results</h2>
    <div id="batchInfo"></div>

    <table id="resultTable" border="1">
      <thead>
        <tr><th>Name</th><th>Function</th><th>Quantity (mg)</th><th>Percentage (%)</th><th>Cost per Kg ($)</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <canvas id="pieChart" style="max-width:400px; margin: 20px auto;"></canvas>
    <svg id="barcode"></svg>

    <div id="recommendations"></div>
  </section>
</main>

<script src="script.js"></script>
</body>
</html>
